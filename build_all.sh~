#!/bin/bash
set -e
export PWD=`pwd`
export CROSS_COMPILE=arm-linux-androideabi-
export PREFIX=${PWD}/system
export SYSROOT=${PWD}/platforms/android-9/arch-arm

if [ "$(uname)" = "Linux" ];
then
	echo "Building on Linux"
	export THREADS="$(nproc)"
	export PATH=$PATH:${PWD}/toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86_64/bin/
else
	echo "Building on Darwin"
	export THREADS="$(sysctl -n hw.ncpu)"
	export PATH=$PATH:${PWD}/toolchains/arm-linux-androideabi-4.8/prebuilt/darwin-x86_64/bin/
fi

cd binutils
./build.sh

cd ../gmp
./build.sh

cd ../mpfr
./build.sh

cd ../mpc
./build.sh

cd ../build_tmp_gcc
./build.sh

cd ../make
./build_android.sh
